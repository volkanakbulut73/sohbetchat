
SUPABASE SQL KURULUMU
=====================

Aşağıdaki kodları Supabase panelinizde "SQL Editor" bölümüne yapıştırıp "RUN" diyerek çalıştırın.
Bu işlem gerekli tüm tabloları oluşturacaktır.

-- 1. registrations tablosu (Kullanıcı verileri)
CREATE TABLE IF NOT EXISTS registrations (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  nickname TEXT UNIQUE NOT NULL,
  full_name TEXT,
  email TEXT UNIQUE NOT NULL,
  password TEXT, -- Not: Prodüksiyonda şifreler hashlenmelidir
  criminal_record_file TEXT, -- Base64 string (dikkat: büyük dosyalar için Storage kullanılmalı)
  insurance_file TEXT,       -- Base64 string
  status TEXT DEFAULT 'pending'
);

-- 2. system_config tablosu (Admin ve Bot ayarları)
CREATE TABLE IF NOT EXISTS system_config (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  key TEXT UNIQUE NOT NULL,
  value TEXT
);

-- Örnek Admin ve Bot Verisi Ekleme
INSERT INTO system_config (key, value)
VALUES 
  ('admin_username', 'admin'),
  ('admin_password', 'password123'),
  ('bot_personality', 'Sen mIRC botu Larasın. Samimi ve naziksin.')
ON CONFLICT (key) DO NOTHING;

-- Not: 'messages', 'channels' ve 'notifications_log' tabloları 
-- POCKETBASE tarafında kalmaya devam edecek (Realtime Chat için).
